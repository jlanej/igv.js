<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>IGV De Novo Variant Review â€“ Documentation</title>
    <style>
        :root {
            --bg: #f5f6fa;
            --card: #ffffff;
            --border: #e0e3ea;
            --text: #2c3e50;
            --text-muted: #7f8c8d;
            --primary: #3498db;
            --pass: #27ae60;
            --fail: #e74c3c;
            --uncertain: #f39c12;
            --pending: #95a5a6;
            --hover: #ecf0f1;
            --code-bg: #1e1e2e;
            --code-text: #cdd6f4;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            font-size: 16px;
            line-height: 1.7;
        }

        /* â”€â”€ Navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        nav {
            background: var(--card);
            border-bottom: 1px solid var(--border);
            padding: 14px 30px;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 1px 4px rgba(0,0,0,0.06);
        }
        nav .brand {
            font-size: 18px;
            font-weight: 700;
            color: var(--text);
            text-decoration: none;
        }
        nav .brand span { margin-right: 6px; }
        nav .nav-links { display: flex; gap: 20px; align-items: center; }
        nav .nav-links a {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.15s;
        }
        nav .nav-links a:hover { color: var(--primary); }
        nav .github-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 13px;
            color: var(--text);
            text-decoration: none;
            transition: background 0.15s;
        }
        nav .github-link:hover { background: var(--hover); }
        nav .github-link svg { width: 18px; height: 18px; }

        /* â”€â”€ Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .hero {
            text-align: center;
            padding: 60px 30px 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
        }
        .hero h1 {
            font-size: 42px;
            font-weight: 800;
            margin-bottom: 16px;
            letter-spacing: -0.5px;
        }
        .hero h1 span { font-size: 48px; margin-right: 10px; }
        .hero p {
            font-size: 18px;
            max-width: 750px;
            margin: 0 auto 30px;
            opacity: 0.9;
            line-height: 1.6;
        }
        .hero-badges { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 16px;
            background: rgba(255,255,255,0.18);
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            backdrop-filter: blur(4px);
        }

        /* â”€â”€ Container â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* â”€â”€ Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .section {
            padding: 60px 0;
        }
        .section + .section {
            border-top: 1px solid var(--border);
        }
        .section h2 {
            font-size: 30px;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--text);
        }
        .section h2 .emoji { margin-right: 10px; }
        .section .subtitle {
            font-size: 16px;
            color: var(--text-muted);
            margin-bottom: 30px;
            max-width: 700px;
        }
        .section h3 {
            font-size: 20px;
            font-weight: 600;
            margin: 30px 0 12px;
            color: var(--text);
        }

        /* â”€â”€ Screenshot figure â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .screenshot {
            margin: 24px 0;
            border: 1px solid var(--border);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            background: var(--card);
        }
        .screenshot img {
            width: 100%;
            display: block;
        }
        .screenshot figcaption {
            padding: 12px 18px;
            font-size: 13px;
            color: var(--text-muted);
            border-top: 1px solid var(--border);
            background: var(--bg);
        }

        /* â”€â”€ Feature grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .feature-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 24px;
            transition: box-shadow 0.2s;
        }
        .feature-card:hover {
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
        }
        .feature-card .icon {
            font-size: 28px;
            margin-bottom: 10px;
        }
        .feature-card h4 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 6px;
        }
        .feature-card p {
            font-size: 14px;
            color: var(--text-muted);
            line-height: 1.5;
        }

        /* â”€â”€ Code blocks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        pre {
            background: var(--code-bg);
            color: var(--code-text);
            padding: 20px 24px;
            border-radius: 10px;
            overflow-x: auto;
            font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', Consolas, monospace;
            font-size: 14px;
            line-height: 1.6;
            margin: 16px 0;
        }
        pre .comment { color: #6c7086; }
        pre .flag { color: #89b4fa; }
        pre .path { color: #a6e3a1; }
        pre .url { color: #f9e2af; }

        code {
            font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', Consolas, monospace;
            background: var(--hover);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
        }
        pre code {
            background: none;
            padding: 0;
        }

        /* â”€â”€ Tables â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .doc-table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
            font-size: 14px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
        }
        .doc-table th {
            background: var(--bg);
            padding: 10px 14px;
            text-align: left;
            font-weight: 600;
            font-size: 13px;
            border-bottom: 2px solid var(--border);
            white-space: nowrap;
        }
        .doc-table td {
            padding: 8px 14px;
            border-bottom: 1px solid var(--border);
        }
        .doc-table tr:last-child td { border-bottom: none; }
        .doc-table code { font-size: 13px; }

        /* â”€â”€ Keyboard shortcut table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .kbd {
            display: inline-block;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 2px 8px;
            font-family: monospace;
            font-size: 13px;
            min-width: 26px;
            text-align: center;
            box-shadow: 0 1px 2px rgba(0,0,0,0.06);
        }

        /* â”€â”€ Step list â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .steps {
            counter-reset: step;
            list-style: none;
            margin: 20px 0;
        }
        .steps li {
            counter-increment: step;
            padding: 14px 0 14px 60px;
            position: relative;
            border-bottom: 1px solid var(--border);
        }
        .steps li:last-child { border-bottom: none; }
        .steps li::before {
            content: counter(step);
            position: absolute;
            left: 0;
            top: 14px;
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background: var(--primary);
            color: #fff;
            font-weight: 700;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .steps li strong {
            display: block;
            font-size: 15px;
            margin-bottom: 4px;
        }
        .steps li p {
            font-size: 14px;
            color: var(--text-muted);
            margin: 0;
        }

        /* â”€â”€ Status badges â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }
        .badge-pass { background: #eafaf1; color: var(--pass); }
        .badge-fail { background: #fdedec; color: var(--fail); }
        .badge-uncertain { background: #fef9e7; color: var(--uncertain); }
        .badge-pending { background: #f2f3f4; color: var(--pending); }

        /* â”€â”€ Two-column layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .two-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: start;
        }

        /* â”€â”€ Side-by-side screenshot + text â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .split {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 30px;
            align-items: start;
            margin: 30px 0;
        }
        .split.reverse {
            grid-template-columns: 1.5fr 1fr;
        }
        .split .text h3 { margin-top: 0; }
        .split .text p { font-size: 15px; color: var(--text-muted); margin-bottom: 12px; }
        .split .text ul { padding-left: 20px; font-size: 14px; color: var(--text-muted); }
        .split .text ul li { margin-bottom: 6px; }

        /* â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        footer {
            text-align: center;
            padding: 40px 30px;
            background: var(--card);
            border-top: 1px solid var(--border);
            color: var(--text-muted);
            font-size: 14px;
        }
        footer a { color: var(--primary); text-decoration: none; }
        footer a:hover { text-decoration: underline; }

        /* â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        @media (max-width: 900px) {
            .hero h1 { font-size: 28px; }
            .hero h1 span { font-size: 32px; }
            .hero p { font-size: 15px; }
            .two-col, .split, .split.reverse { grid-template-columns: 1fr; }
            .section h2 { font-size: 24px; }
            nav .nav-links { gap: 12px; }
            nav .nav-links a { font-size: 13px; }
        }

        /* â”€â”€ Callout box â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .callout {
            background: #eef6ff;
            border-left: 4px solid var(--primary);
            padding: 16px 20px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
            font-size: 14px;
        }
        .callout strong { color: var(--primary); }

        /* â”€â”€ Anchor offset for sticky nav â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        [id] {
            scroll-margin-top: 70px;
        }
    </style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Navigation                                                             -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<nav>
    <a href="#" class="brand"><span>ğŸ§¬</span> IGV Variant Review</a>
    <div class="nav-links">
        <a href="#features">Features</a>
        <a href="#quick-start">Quick Start</a>
        <a href="#variant-table">Variant Table</a>
        <a href="#filtering">Filtering</a>
        <a href="#curation">Curation</a>
        <a href="#igv-viewer">IGV Viewer</a>
        <a href="#gene-summary">Gene Summary</a>
        <a href="#sample-summary">Sample Summary</a>
        <a href="#sample-qc">Sample QC</a>
        <a href="#export">Export</a>
        <a href="#keyboard-shortcuts">Shortcuts</a>
        <a href="#deployment">Deployment</a>
        <a href="https://github.com/jlanej/igv.js" class="github-link">
            <svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
            GitHub
        </a>
    </div>
</nav>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Hero Section                                                           -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="hero">
    <h1><span>ğŸ§¬</span> IGV De Novo Variant Review</h1>
    <p>
        An HPC-deployable web service for browsing, reviewing, and curating
        de novo variants in trio sequencing data. Built on
        <a href="https://github.com/igvteam/igv.js" style="color:#fff;text-decoration:underline">igv.js</a>,
        designed for clinical genomics and research workflows.
    </p>
    <div class="hero-badges">
        <span class="hero-badge">ğŸ”¬ Trio Alignment Viewing</span>
        <span class="hero-badge">âœ… Manual Curation</span>
        <span class="hero-badge">ğŸ“Š XLSX Export</span>
        <span class="hero-badge">ğŸ³ Docker &amp; Singularity</span>
        <span class="hero-badge">âŒ¨ï¸ Keyboard Shortcuts</span>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Overview Screenshot                                                    -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <div class="section">
        <figure class="screenshot">
            <img src="screenshots/01-overview.png"
                 alt="Full application overview showing the variant table, filter sidebar, and IGV viewer area">
            <figcaption>
                <strong>Full application overview</strong> â€“ The variant table with filter sidebar (left), tab navigation, and integrated IGV genome viewer below.
            </figcaption>
        </figure>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Features Overview                                                      -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <div class="section" id="features">
        <h2><span class="emoji">âœ¨</span> Features</h2>
        <p class="subtitle">
            Everything you need to review, curate, and export de novo variant calls from trio sequencing data.
        </p>
        <div class="feature-grid">
            <div class="feature-card">
                <div class="icon">ğŸ“‹</div>
                <h4>Variant Browsing</h4>
                <p>Paginated, sortable table of variants with all annotations. Click any column header to sort ascending or descending.</p>
            </div>
            <div class="feature-card">
                <div class="icon">ğŸ”</div>
                <h4>Dynamic Filtering</h4>
                <p>Filter on any annotation column â€“ gene, impact, frequency, inheritance, curation status. Checkbox groups for categorical values, range sliders for numeric fields.</p>
            </div>
            <div class="feature-card">
                <div class="icon">ğŸ§¬</div>
                <h4>IGV Alignment Viewer</h4>
                <p>Click a variant to load child / mother / father alignment tracks directly in the browser at the variant position. Supports BAM, CRAM, and VCF files.</p>
            </div>
            <div class="feature-card">
                <div class="icon">âœ…</div>
                <h4>Manual Curation</h4>
                <p>Mark variants as <span class="badge badge-pass">Pass</span> <span class="badge badge-fail">Fail</span> <span class="badge badge-uncertain">Uncertain</span> with free-text notes. Curation is persisted to disk using stable genomic-coordinate keys.</p>
            </div>
            <div class="feature-card">
                <div class="icon">ğŸ§ª</div>
                <h4>Gene &amp; Sample Summary</h4>
                <p>Post-filtering summaries showing genes with multiple variants, per-sample curation counts, and cohort-level statistics.</p>
            </div>
            <div class="feature-card">
                <div class="icon">ğŸ“Š</div>
                <h4>Publication-Quality Export</h4>
                <p>Export filtered + curated variants as TSV or styled XLSX workbooks with IGV screenshot tabs and cross-sheet hyperlinks.</p>
            </div>
            <div class="feature-card">
                <div class="icon">ğŸ”¬</div>
                <h4>Sample QC Integration</h4>
                <p>Load VerifyBamID freemix or other QC metrics to display color-coded warnings for contaminated or low-coverage samples.</p>
            </div>
            <div class="feature-card">
                <div class="icon">âŒ¨ï¸</div>
                <h4>Keyboard Shortcuts</h4>
                <p>Navigate variants, curate, and toggle UI elements entirely from the keyboard for high-throughput review sessions.</p>
            </div>
            <div class="feature-card">
                <div class="icon">ğŸ³</div>
                <h4>HPC Deployment</h4>
                <p>Dockerized for portability. Convert to Singularity/Apptainer SIF for HPC clusters. Run via SLURM with port forwarding.</p>
            </div>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Quick Start                                                            -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <div class="section" id="quick-start">
        <h2><span class="emoji">ğŸš€</span> Quick Start</h2>
        <p class="subtitle">Get up and running in under 5 minutes.</p>

        <h3>Prerequisites</h3>
        <p>Node.js 18+ is required. On HPC clusters, you can use Docker/Singularity instead (see <a href="#deployment">Deployment</a>).</p>

        <h3>Installation &amp; Launch</h3>
        <pre><code><span class="comment"># 1. Clone the repository</span>
git clone https://github.com/jlanej/igv.js.git
cd igv.js

<span class="comment"># 2. Build igv.js (from the repo root â€“ only needed once)</span>
npm install
npm run build

<span class="comment"># 3. Install server dependencies</span>
cd server
npm install

<span class="comment"># 4. Start the server with your data</span>
node server.js \
  <span class="flag">--variants</span> <span class="path">/path/to/your/variants.tsv</span> \
  <span class="flag">--data-dir</span> <span class="path">/path/to/bam_cram_files</span> \
  <span class="flag">--sample-qc</span> <span class="path">/path/to/sample_qc.tsv</span> \
  <span class="flag">--genome</span> hg38 \
  <span class="flag">--port</span> 3000

<span class="comment"># 5. Open in your browser</span>
<span class="comment">#    http://127.0.0.1:3000</span></code></pre>

        <h3>Try with Example Data</h3>
        <p>The server includes example data for a quick demo (no alignment files needed â€“ the table and filtering still work):</p>
        <pre><code>cd server
node server.js
<span class="comment"># Open http://127.0.0.1:3000</span></code></pre>

        <h3>CLI Options</h3>
        <table class="doc-table">
            <thead>
                <tr>
                    <th>Flag</th>
                    <th>Default</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr><td><code>--variants</code></td><td><code>example_data/variants.tsv</code></td><td>Path to variant TSV file</td></tr>
                <tr><td><code>--data-dir</code></td><td><code>example_data/</code></td><td>Directory containing BAM/CRAM alignment files</td></tr>
                <tr><td><code>--genome</code></td><td><code>hg38</code></td><td>Reference genome for igv.js</td></tr>
                <tr><td><code>--port</code></td><td><code>3000</code></td><td>HTTP port to listen on</td></tr>
                <tr><td><code>--host</code></td><td><code>127.0.0.1</code></td><td>Bind address (use <code>0.0.0.0</code> in containers)</td></tr>
                <tr><td><code>--curation-file</code></td><td><code>&lt;variants&gt;.curation.json</code></td><td>Curation persistence file</td></tr>
                <tr><td><code>--sample-qc</code></td><td><em>(none)</em></td><td>Path to sample QC TSV file</td></tr>
                <tr><td><code>--vcf</code></td><td><em>(none)</em></td><td>Path to global VCF file for variant tracks</td></tr>
                <tr><td><code>--log-level</code></td><td><code>info</code></td><td>Log verbosity: <code>debug</code>, <code>info</code>, <code>warn</code>, <code>error</code></td></tr>
            </tbody>
        </table>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Variant Table                                                          -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <div class="section" id="variant-table">
        <h2><span class="emoji">ğŸ“‹</span> Variant Table</h2>
        <p class="subtitle">
            The main view for browsing and reviewing variants. All annotation columns from your TSV are displayed and sortable.
        </p>

        <figure class="screenshot">
            <img src="screenshots/02-variant-table.png"
                 alt="Variant table showing 10 rows with sortable columns, pagination, search, and curation status badges">
            <figcaption>
                <strong>Variant table</strong> â€“ Sortable columns, search bar, pagination controls, and color-coded curation status badges.
            </figcaption>
        </figure>

        <h3>Key Capabilities</h3>
        <ul>
            <li><strong>Sortable columns</strong> â€“ Click any column header to sort ascending (â–²) or descending (â–¼). The current sort is indicated by an arrow icon.</li>
            <li><strong>Search</strong> â€“ Type in the search bar to perform case-insensitive substring search across all columns. Results update with a 300ms debounce.</li>
            <li><strong>Pagination</strong> â€“ Navigate through large variant sets with Previous/Next buttons. Page size defaults to 50 variants.</li>
            <li><strong>Row selection</strong> â€“ Check individual rows or use "Select all on page" for batch curation operations.</li>
            <li><strong>Curation status</strong> â€“ Each row displays a colored badge: <span class="badge badge-pass">Pass</span> <span class="badge badge-fail">Fail</span> <span class="badge badge-uncertain">Uncertain</span> <span class="badge badge-pending">Pending</span>. The entire row background is tinted to match.</li>
            <li><strong>Click to view</strong> â€“ Click any variant row to load its trio alignment tracks in the IGV viewer below the table.</li>
        </ul>

        <h3>Stats Bar</h3>
        <p>The header bar displays real-time statistics: total variant count, number currently shown (after filtering), and per-status curation tallies. These counts reflect <em>all</em> variants, not just the current page.</p>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Filtering                                                              -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <div class="section" id="filtering">
        <h2><span class="emoji">ğŸ”</span> Dynamic Filtering</h2>
        <p class="subtitle">
            Filter variants using any combination of annotation columns. Filters are applied server-side for fast response on large datasets.
        </p>

        <div class="split">
            <figure class="screenshot" style="margin:0">
                <img src="screenshots/03-filter-panel.png"
                     alt="Filter sidebar showing gene checkboxes, impact checkboxes, frequency range inputs, and curation status filters">
                <figcaption>
                    <strong>Filter panel</strong> â€“ Checkbox groups, range inputs, and quick curation actions.
                </figcaption>
            </figure>
            <div class="text">
                <h3>Filter Types</h3>
                <ul>
                    <li><strong>Checkbox groups</strong> â€“ For categorical columns with â‰¤10 unique values (e.g., gene, impact, inheritance, curation status). Check one or more values to include.</li>
                    <li><strong>Dropdown selectors</strong> â€“ For categorical columns with &gt;10 unique values. Select one or more from a dropdown menu.</li>
                    <li><strong>Range inputs</strong> â€“ For numeric columns (e.g., frequency, quality). Set minimum and/or maximum values.</li>
                </ul>

                <h3>Filter Actions</h3>
                <ul>
                    <li><strong>Apply Filters</strong> â€“ Submit all current filter selections to the server and refresh the variant table.</li>
                    <li><strong>Clear All</strong> â€“ Reset all filters to show all variants.</li>
                    <li><strong>ğŸ’¾ Save Filters</strong> â€“ Save the current filter configuration for later reuse.</li>
                    <li><strong>ğŸ“‚ Load Filters</strong> â€“ Restore a previously saved filter configuration.</li>
                </ul>

                <h3>Collapsible Groups</h3>
                <p>Each filter group can be collapsed or expanded individually by clicking the header. Use the <strong>â–¼ Collapse All</strong> / <strong>â–² Expand All</strong> button to toggle all groups at once.</p>

                <h3>Collapsible Sidebar</h3>
                <p>The entire filter sidebar can be collapsed using the â—€ toggle button or the keyboard shortcut <span class="kbd">Ctrl</span>+<span class="kbd">B</span> to maximize table and IGV viewer space.</p>
            </div>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Curation Workflow                                                      -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <div class="section" id="curation">
        <h2><span class="emoji">âœ…</span> Curation Workflow</h2>
        <p class="subtitle">
            A streamlined workflow for reviewing and curating variants, designed for high-throughput sessions.
        </p>

        <figure class="screenshot">
            <img src="screenshots/08-curation-workflow.png"
                 alt="Curation workflow showing an active variant row highlighted in blue, IGV viewer, curation buttons, and note field">
            <figcaption>
                <strong>Curation in action</strong> â€“ An active variant is highlighted, with curation buttons and note field in the IGV header.
            </figcaption>
        </figure>

        <h3>Step-by-Step Workflow</h3>
        <ol class="steps">
            <li>
                <strong>Filter variants</strong>
                <p>Use the sidebar controls to narrow down to variants of interest (e.g., HIGH impact, de novo inheritance, low frequency).</p>
            </li>
            <li>
                <strong>Click a variant row</strong>
                <p>The row highlights in blue and the IGV viewer loads the trio alignment tracks (child, mother, father) at the variant position.</p>
            </li>
            <li>
                <strong>Review trio alignments</strong>
                <p>Examine read support in the child versus parents. Toggle display mode (Squished / Expanded / Collapsed) for different views.</p>
            </li>
            <li>
                <strong>Curate the variant</strong>
                <p>Click <span class="badge badge-pass">âœ“ Pass</span>, <span class="badge badge-fail">âœ— Fail</span>, or <span class="badge badge-uncertain">? Uncertain</span>. The table row updates its color immediately.</p>
            </li>
            <li>
                <strong>Add a note (optional)</strong>
                <p>Type a free-text note in the curation note field. Use the "Previous notesâ€¦" dropdown to reuse common notes from prior curations.</p>
            </li>
            <li>
                <strong>Advance to the next variant</strong>
                <p>Press <span class="kbd">j</span> to jump to the next uncurated variant, or use <span class="kbd">P</span> / <span class="kbd">F</span> / <span class="kbd">U</span> to curate and advance in one keystroke.</p>
            </li>
            <li>
                <strong>Export results</strong>
                <p>When done, export your curated variant set as TSV or publication-quality XLSX.</p>
            </li>
        </ol>

        <h3>Batch Curation</h3>
        <p>Select multiple variant rows using the checkboxes, then use the <strong>Quick Curation</strong> buttons in the sidebar to apply a curation status to all selected variants at once. This is useful for quickly failing a group of known artifacts.</p>

        <h3>Sample-Level Curation</h3>
        <p>The Sample Summary tab includes <strong>Flag Sample</strong> buttons (<span class="badge badge-pass">âœ“</span> <span class="badge badge-fail">âœ—</span> <span class="badge badge-uncertain">?</span>) that let you curate all variants for an entire sample in one click.</p>

        <h3>Gene-Level Curation</h3>
        <p>Similarly, the Gene Summary tab includes <strong>Flag Gene</strong> buttons to curate all variants within a specific gene at once.</p>

        <h3>Curation Persistence</h3>
        <div class="callout">
            <strong>Stable keys:</strong> Curation state is saved to a JSON file using <code>chrom:pos:ref:alt</code> coordinate keys (with optional <code>trio_id</code> / <code>sample_id</code> suffix for multi-sample datasets). This means curation data survives changes to the variant list, row reordering, and additions/removals across sessions.
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- IGV Viewer                                                             -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <div class="section" id="igv-viewer">
        <h2><span class="emoji">ğŸ§¬</span> IGV Alignment Viewer</h2>
        <p class="subtitle">
            An embedded igv.js genome browser for reviewing trio alignment data directly in the web interface.
        </p>

        <figure class="screenshot">
            <img src="screenshots/04-igv-viewer.png"
                 alt="IGV viewer showing variant metadata, curation buttons, genome viewer placeholder, and track status indicators">
            <figcaption>
                <strong>IGV viewer section</strong> â€“ Variant metadata header, curation controls, genome viewer, display mode selector, and track load status.
            </figcaption>
        </figure>

        <h3>Viewer Components</h3>
        <ul>
            <li><strong>Variant metadata header</strong> â€“ Shows gene symbol, genomic coordinates (e.g., <code>chr1:12,345</code>), allele change (<code>Aâ†’G</code>), and trio-specific metadata badges (AD, GQ, DKA/DKT values for each family member).</li>
            <li><strong>Curation controls</strong> â€“ Pass / Fail / Uncertain buttons, note suggestions dropdown, free-text note textarea, and Save Note button â€” all inline in the IGV header for efficient review.</li>
            <li><strong>Genome browser</strong> â€“ Full igv.js browser displaying child, mother, and father alignment tracks centered on the variant position. Supports BAM and CRAM formats.</li>
            <li><strong>Display mode selector</strong> â€“ Toggle between Squished, Expanded, and Collapsed read display modes for all alignment tracks simultaneously.</li>
            <li><strong>Track load status</strong> â€“ Color-coded badges showing whether each trio member's tracks loaded successfully, have no reads, or encountered errors.</li>
        </ul>

        <h3>VCF Track Support</h3>
        <p>Optionally load VCF tracks alongside alignments. VCF files can be specified:</p>
        <ul>
            <li><strong>Per-trio</strong> â€“ Via <code>child_vcf</code>, <code>mother_vcf</code>, <code>father_vcf</code> columns in the variant TSV, with corresponding <code>*_vcf_index</code> and <code>*_vcf_id</code> columns.</li>
            <li><strong>Globally</strong> â€“ Via the <code>--vcf</code> CLI flag, applying to all variants.</li>
        </ul>
        <p>Shared multi-sample VCF files are de-duplicated automatically and loaded as a single track annotated with all sample roles.</p>

        <h3>Resizable Layout</h3>
        <p>A drag handle between the variant table and the IGV viewer allows you to resize the table height to allocate more or less screen space to the genome browser.</p>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Gene Summary                                                           -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <div class="section" id="gene-summary">
        <h2><span class="emoji">ğŸ§ª</span> Gene Summary</h2>
        <p class="subtitle">
            Aggregate view of variants by gene, reflecting current filters. Useful for identifying genes with multiple candidate variants.
        </p>

        <figure class="screenshot">
            <img src="screenshots/05-gene-summary.png"
                 alt="Gene summary table showing genes with variant counts, sample counts, curation breakdowns, and Flag Gene buttons">
            <figcaption>
                <strong>Gene Summary tab</strong> â€“ One row per gene with total variant count, sample count, per-status curation breakdown, and gene-level curation buttons.
            </figcaption>
        </figure>

        <h3>Columns</h3>
        <table class="doc-table">
            <thead>
                <tr><th>Column</th><th>Description</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Gene</strong></td><td>Gene symbol (clickable â€“ filters the variant table to that gene)</td></tr>
                <tr><td><strong>Total</strong></td><td>Number of variants in this gene passing current filters</td></tr>
                <tr><td><strong>Samples</strong></td><td>Number of distinct samples/trios with variants in this gene</td></tr>
                <tr><td><strong>Pass / Fail / Uncertain / Pending</strong></td><td>Per-status curation counts for this gene</td></tr>
                <tr><td><strong>Variants</strong></td><td>Comma-separated list of variant positions</td></tr>
                <tr><td><strong>Flag Gene</strong></td><td><span class="badge badge-pass">âœ“</span> <span class="badge badge-fail">âœ—</span> <span class="badge badge-uncertain">?</span> buttons to curate all variants in the gene at once</td></tr>
            </tbody>
        </table>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Sample Summary                                                         -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <div class="section" id="sample-summary">
        <h2><span class="emoji">ğŸ“ˆ</span> Sample Summary</h2>
        <p class="subtitle">
            Per-sample variant counts and cohort-level statistics, broken down by impact and frequency thresholds.
        </p>

        <figure class="screenshot">
            <img src="screenshots/06-sample-summary.png"
                 alt="Sample summary showing cohort statistics table and per-sample variant counts table">
            <figcaption>
                <strong>Sample Summary tab</strong> â€“ Cohort-level mean/median/SD (top) and per-sample variant counts with curation breakdown (bottom).
            </figcaption>
        </figure>

        <h3>Cohort Summary</h3>
        <p>Displays mean, median, and standard deviation of variant counts across all samples, stratified by impact level and frequency threshold. This helps identify samples with unusually high or low variant burdens.</p>

        <h3>Per-Sample Counts</h3>
        <p>Each row shows one sample/trio with:</p>
        <ul>
            <li>Total unfiltered variant count</li>
            <li>Variants passing current filters</li>
            <li>Curation breakdown: <span class="badge badge-pass">Pass</span> <span class="badge badge-fail">Fail</span> <span class="badge badge-uncertain">Uncertain</span> <span class="badge badge-pending">Pending</span></li>
            <li>Variant counts per impact group Ã— frequency threshold combination</li>
            <li><strong>Flag Sample</strong> buttons for sample-level curation</li>
        </ul>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Sample QC                                                              -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <div class="section" id="sample-qc">
        <h2><span class="emoji">ğŸ”¬</span> Sample QC</h2>
        <p class="subtitle">
            Quality control metrics integration for flagging problematic samples before curation.
        </p>

        <p>Load a per-sample QC file with <code>--sample-qc &lt;path&gt;</code> to enable QC integration. The QC file is a tab-separated file with columns for <code>trio_id</code>, <code>role</code> (proband/mother/father), <code>sample_id</code>, and any number of numeric QC metrics.</p>

        <h3>Freemix Thresholds</h3>
        <p>The <code>freemix</code> column (from VerifyBamID) is automatically classified:</p>
        <table class="doc-table">
            <thead>
                <tr><th>Status</th><th>Freemix Range</th><th>Interpretation</th></tr>
            </thead>
            <tbody>
                <tr><td><span class="badge badge-pass">Pass</span></td><td>â‰¤ 0.01 (â‰¤1%)</td><td>Clean â€“ no special handling needed</td></tr>
                <tr><td><span class="badge badge-uncertain">Warn</span></td><td>0.01â€“0.03</td><td>Caution â€“ apply stricter DNM evidence filters</td></tr>
                <tr><td><span class="badge badge-fail">Fail</span></td><td>0.03â€“0.05</td><td>Exclude sample/trio from DNM detection</td></tr>
                <tr><td style="background:#f5b7b1;color:#922b21;padding:3px 10px;border-radius:12px;font-size:12px;font-weight:600;">CRITICAL</td><td>â‰¥ 0.05 (â‰¥5%)</td><td>Hard fail â€“ results are usually unreliable</td></tr>
            </tbody>
        </table>

        <h3>UI Integration</h3>
        <ul>
            <li><strong>Sample QC tab</strong> â€“ One row per trio showing each member's QC metrics with color-coded cells.</li>
            <li><strong>Variant table QC badges</strong> â€“ When a trio's <code>trio_id</code> matches the variant TSV, a colored dot + badge appears in the variant table's QC column.</li>
            <li><strong>XLSX export</strong> â€“ QC data is included as a styled "Sample QC" sheet.</li>
        </ul>

        <h3>Example QC File</h3>
        <pre><code>trio_id	role	sample_id	freemix	mean_coverage
TRIO_A	proband	SAMPLE_001	0.005	35.2
TRIO_A	mother	SAMPLE_002	0.012	30.1
TRIO_A	father	SAMPLE_003	0.002	32.5
TRIO_B	proband	SAMPLE_004	0.045	28.3
TRIO_B	mother	SAMPLE_005	0.008	31.7
TRIO_B	father	SAMPLE_006	0.003	29.8</code></pre>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Export                                                                  -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <div class="section" id="export">
        <h2><span class="emoji">ğŸ“Š</span> Export</h2>
        <p class="subtitle">
            Download your curated variant data in multiple formats for downstream analysis and publication.
        </p>

        <div class="two-col">
            <div>
                <h3>ğŸ“¥ TSV Export</h3>
                <p>Downloads the currently filtered and curated variants as a tab-separated text file. Includes all original columns plus <code>curation_status</code> and <code>curation_note</code> columns appended.</p>
                <p>The export respects the current filter settings, so you can export subsets (e.g., only passing variants, only HIGH-impact variants).</p>
            </div>
            <div>
                <h3>ğŸ“Š XLSX Export</h3>
                <p>Generates a publication-ready Excel workbook with multiple sheets:</p>
                <ul>
                    <li><strong>Variants</strong> â€“ Styled table with auto-filters, frozen header, and full-row coloring by curation status</li>
                    <li><strong>Per-variant screenshot tabs</strong> â€“ One worksheet per variant with the IGV alignment view embedded as a PNG image</li>
                    <li><strong>Cross-sheet hyperlinks</strong> â€“ Each variant row includes a "ğŸ“· View" link to its screenshot tab</li>
                    <li><strong>Gene Summary</strong> â€“ Gene-level aggregation sheet</li>
                    <li><strong>Sample Summary</strong> â€“ Per-sample curation counts with cohort statistics</li>
                    <li><strong>Applied Filters</strong> â€“ Record of which filters were active during export</li>
                    <li><strong>Sample QC</strong> â€“ QC metrics sheet (if QC data was loaded)</li>
                </ul>
            </div>
        </div>

        <div class="callout">
            <strong>Progress tracking:</strong> XLSX export shows a progress bar in the sidebar as it captures IGV screenshots for each variant. For large variant sets, this can take several minutes.
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Keyboard Shortcuts                                                     -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <div class="section" id="keyboard-shortcuts">
        <h2><span class="emoji">âŒ¨ï¸</span> Keyboard Shortcuts</h2>
        <p class="subtitle">
            Navigate and curate entirely from the keyboard for efficient high-throughput review sessions.
        </p>

        <div class="split reverse">
            <div class="text">
                <table class="doc-table">
                    <thead>
                        <tr><th>Action</th><th>Key</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>Next uncurated variant</td><td><span class="kbd">j</span> or <span class="kbd">â†“</span></td></tr>
                        <tr><td>Previous uncurated variant</td><td><span class="kbd">k</span> or <span class="kbd">â†‘</span></td></tr>
                        <tr><td>Mark as Pass</td><td><span class="kbd">p</span></td></tr>
                        <tr><td>Mark as Fail</td><td><span class="kbd">f</span></td></tr>
                        <tr><td>Mark as Uncertain</td><td><span class="kbd">u</span></td></tr>
                        <tr><td>Pass &amp; advance to next</td><td><span class="kbd">P</span> (Shift+p)</td></tr>
                        <tr><td>Fail &amp; advance to next</td><td><span class="kbd">F</span> (Shift+f)</td></tr>
                        <tr><td>Uncertain &amp; advance to next</td><td><span class="kbd">U</span> (Shift+u)</td></tr>
                        <tr><td>Toggle keyboard shortcuts help</td><td><span class="kbd">?</span></td></tr>
                        <tr><td>Toggle filter sidebar</td><td><span class="kbd">Ctrl</span>+<span class="kbd">B</span></td></tr>
                    </tbody>
                </table>
                <p style="margin-top:16px">Press <span class="kbd">?</span> at any time to display the shortcuts overlay in the bottom-right corner of the screen.</p>
            </div>
            <figure class="screenshot" style="margin:0">
                <img src="screenshots/07-keyboard-shortcuts.png"
                     alt="Keyboard shortcuts overlay panel showing all available shortcuts">
                <figcaption>
                    <strong>Keyboard shortcuts panel</strong> â€“ Press <span class="kbd">?</span> to toggle.
                </figcaption>
            </figure>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Input File Format                                                      -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <div class="section" id="input-format">
        <h2><span class="emoji">ğŸ“„</span> Input File Format</h2>
        <p class="subtitle">
            The server reads a tab-separated variant file with a header row. Four columns are required; all others are auto-detected and made filterable.
        </p>

        <h3>Required Columns</h3>
        <table class="doc-table">
            <thead>
                <tr><th>Column</th><th>Description</th></tr>
            </thead>
            <tbody>
                <tr><td><code>chrom</code></td><td>Chromosome (e.g., <code>chr1</code>)</td></tr>
                <tr><td><code>pos</code></td><td>1-based genomic position</td></tr>
                <tr><td><code>ref</code></td><td>Reference allele</td></tr>
                <tr><td><code>alt</code></td><td>Alternate allele</td></tr>
            </tbody>
        </table>

        <h3>Recommended Columns</h3>
        <table class="doc-table">
            <thead>
                <tr><th>Column</th><th>Description</th></tr>
            </thead>
            <tbody>
                <tr><td><code>gene</code></td><td>Gene symbol â€“ enables the Gene Summary tab</td></tr>
                <tr><td><code>impact</code></td><td>Variant impact (HIGH / MODERATE / LOW / MODIFIER)</td></tr>
                <tr><td><code>frequency</code></td><td>Population allele frequency</td></tr>
                <tr><td><code>inheritance</code></td><td>Inheritance pattern (de_novo / inherited / unknown)</td></tr>
                <tr><td><code>quality</code></td><td>Variant quality score</td></tr>
                <tr><td><code>child_gt</code>, <code>mother_gt</code>, <code>father_gt</code></td><td>Genotypes (e.g., <code>0/1</code>)</td></tr>
                <tr><td><code>child_file</code>, <code>mother_file</code>, <code>father_file</code></td><td>Paths to BAM/CRAM alignment files (relative to <code>--data-dir</code>)</td></tr>
                <tr><td><code>child_index</code>, <code>mother_index</code>, <code>father_index</code></td><td>Paths to alignment index files (.bai/.crai) â€“ optional if co-located</td></tr>
                <tr><td><code>trio_id</code> / <code>sample_id</code></td><td>Identifiers for multi-sample datasets, used for stable curation keys and QC linking</td></tr>
            </tbody>
        </table>

        <h3>Per-Trio VCF Columns</h3>
        <table class="doc-table">
            <thead>
                <tr><th>Column</th><th>Description</th></tr>
            </thead>
            <tbody>
                <tr><td><code>child_vcf</code>, <code>mother_vcf</code>, <code>father_vcf</code></td><td>Paths to VCF files (.vcf.gz)</td></tr>
                <tr><td><code>child_vcf_index</code>, <code>mother_vcf_index</code>, <code>father_vcf_index</code></td><td>Paths to VCF index files (.vcf.gz.tbi)</td></tr>
                <tr><td><code>child_vcf_id</code>, <code>mother_vcf_id</code>, <code>father_vcf_id</code></td><td>Sample IDs within multi-sample VCF files</td></tr>
            </tbody>
        </table>

        <p>Additional columns (e.g., <code>cadd_score</code>, <code>clinvar</code>, <code>gnomad_af</code>) are automatically displayed in the variant table and made available as filter options.</p>

        <h3>Alignment File Paths</h3>
        <ul>
            <li><strong>Relative paths</strong> â€“ Resolved relative to the <code>--data-dir</code> directory.</li>
            <li><strong>Absolute URLs</strong> â€“ <code>https://â€¦</code> paths are served directly (useful for cloud-hosted BAMs).</li>
            <li>If index files follow standard naming (<code>.bam.bai</code>, <code>.cram.crai</code>) and are co-located, the index columns can be omitted.</li>
        </ul>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- HPC Deployment                                                         -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <div class="section" id="deployment">
        <h2><span class="emoji">ğŸ³</span> HPC Deployment</h2>
        <p class="subtitle">
            Deploy on HPC clusters using Docker, Singularity/Apptainer, or native Node.js.
        </p>

        <h3>Docker / Singularity (Recommended)</h3>
        <p>Most HPC clusters don't have Node.js. Build a Docker image and convert to a Singularity SIF:</p>
        <pre><code><span class="comment"># Pull pre-built image from GitHub Container Registry</span>
docker pull ghcr.io/jlanej/igv-variant-review:latest

<span class="comment"># Or build locally from the repo root</span>
docker build -t igv-variant-review .

<span class="comment"># Convert to Singularity SIF</span>
singularity build igv-variant-review.sif \
  docker://ghcr.io/jlanej/igv-variant-review:latest</code></pre>

        <h3>Run with Singularity</h3>
        <pre><code>singularity run \
  <span class="flag">--bind</span> <span class="path">/scratch/project/alignments:/data</span> \
  <span class="flag">--bind</span> <span class="path">/scratch/project/denovo_variants.tsv:/variants.tsv</span> \
  <span class="flag">--bind</span> <span class="path">/scratch/project/curation.json:/curation.json</span> \
  igv-variant-review.sif \
  <span class="flag">--variants</span> /variants.tsv \
  <span class="flag">--data-dir</span> /data \
  <span class="flag">--curation-file</span> /curation.json \
  <span class="flag">--port</span> 8080

<span class="comment"># Open browser: http://127.0.0.1:8080</span></code></pre>

        <h3>SLURM Job Script</h3>
        <pre><code><span class="comment">#!/bin/bash</span>
<span class="comment">#SBATCH --job-name=igv-review</span>
<span class="comment">#SBATCH --time=8:00:00</span>
<span class="comment">#SBATCH --mem=4G</span>

singularity run \
  <span class="flag">--bind</span> <span class="path">/scratch/project/alignments:/data</span> \
  <span class="flag">--bind</span> <span class="path">/scratch/project/denovo_variants.tsv:/variants.tsv</span> \
  igv-variant-review.sif \
  <span class="flag">--variants</span> /variants.tsv \
  <span class="flag">--data-dir</span> /data \
  <span class="flag">--port</span> 3000

<span class="comment"># Forward the port from a login node:</span>
<span class="comment"># ssh -L 3000:$SLURMD_NODENAME:3000 login-node</span></code></pre>

        <h3>Native Node.js</h3>
        <p>If Node.js is available on your cluster (via <code>module load</code> or otherwise):</p>
        <pre><code>module load nodejs

cd /path/to/igv.js/server
npm install

node server.js \
  <span class="flag">--variants</span> <span class="path">/scratch/project/denovo_variants.tsv</span> \
  <span class="flag">--data-dir</span> <span class="path">/scratch/project/alignments/</span> \
  <span class="flag">--port</span> 8080

<span class="comment"># Open Firefox/Chrome: http://127.0.0.1:8080</span></code></pre>

        <h3>Port Forwarding</h3>
        <p>When running on a remote compute node, forward the port to your local machine:</p>
        <pre><code><span class="comment"># From your local terminal:</span>
ssh -L 3000:compute-node:3000 login-node

<span class="comment"># Then open http://localhost:3000 in your local browser</span></code></pre>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- REST API                                                               -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <div class="section" id="api">
        <h2><span class="emoji">ğŸ”Œ</span> REST API</h2>
        <p class="subtitle">
            The server exposes a RESTful API for programmatic access. All endpoints return JSON.
        </p>

        <table class="doc-table">
            <thead>
                <tr><th>Method</th><th>Endpoint</th><th>Description</th></tr>
            </thead>
            <tbody>
                <tr><td><code>GET</code></td><td><code>/api/config</code></td><td>Server configuration, column list, and total variant count</td></tr>
                <tr><td><code>GET</code></td><td><code>/api/variants</code></td><td>Paginated, filterable, sortable variant list with curation status</td></tr>
                <tr><td><code>GET</code></td><td><code>/api/filters</code></td><td>Available filter options (categorical values, numeric ranges) for each column</td></tr>
                <tr><td><code>GET</code></td><td><code>/api/summary</code></td><td>Gene-level aggregation of current filtered variants</td></tr>
                <tr><td><code>GET</code></td><td><code>/api/sample-summary</code></td><td>Per-sample variant counts and cohort statistics</td></tr>
                <tr><td><code>GET</code></td><td><code>/api/sample-qc</code></td><td>Sample QC metrics (if loaded via <code>--sample-qc</code>)</td></tr>
                <tr><td><code>PUT</code></td><td><code>/api/curate/:id</code></td><td>Set curation status and note for a single variant</td></tr>
                <tr><td><code>PUT</code></td><td><code>/api/curate/gene</code></td><td>Curate all variants in a gene at once</td></tr>
                <tr><td><code>PUT</code></td><td><code>/api/curate/sample</code></td><td>Curate all variants for a sample at once</td></tr>
                <tr><td><code>POST</code></td><td><code>/api/export/xlsx</code></td><td>Generate and download a styled XLSX workbook</td></tr>
            </tbody>
        </table>

        <h3>Variant Query Parameters</h3>
        <p>The <code>/api/variants</code> endpoint supports the following query parameters:</p>
        <table class="doc-table">
            <thead>
                <tr><th>Parameter</th><th>Example</th><th>Description</th></tr>
            </thead>
            <tbody>
                <tr><td><code>page</code></td><td><code>1</code></td><td>Page number (1-based)</td></tr>
                <tr><td><code>perPage</code></td><td><code>50</code></td><td>Results per page</td></tr>
                <tr><td><code>sort</code></td><td><code>gene</code></td><td>Column to sort by</td></tr>
                <tr><td><code>order</code></td><td><code>asc</code></td><td>Sort order (<code>asc</code> or <code>desc</code>)</td></tr>
                <tr><td><code>search</code></td><td><code>BRCA</code></td><td>Case-insensitive substring search across all columns</td></tr>
                <tr><td><code>filter_&lt;column&gt;</code></td><td><code>filter_impact=HIGH,MODERATE</code></td><td>Filter by categorical column values (comma-separated)</td></tr>
                <tr><td><code>&lt;column&gt;_min</code></td><td><code>quality_min=30</code></td><td>Filter by minimum numeric value</td></tr>
                <tr><td><code>&lt;column&gt;_max</code></td><td><code>frequency_max=0.01</code></td><td>Filter by maximum numeric value</td></tr>
            </tbody>
        </table>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Architecture                                                           -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <div class="section" id="architecture">
        <h2><span class="emoji">ğŸ—ï¸</span> Architecture</h2>
        <p class="subtitle">
            A lightweight Express server with an in-memory variant store and a single-page web UI.
        </p>

        <pre><code>igv.js/
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ server.js              <span class="comment"># Express server &amp; REST API</span>
â”‚   â”œâ”€â”€ logger.js              <span class="comment"># Leveled logger with timestamps</span>
â”‚   â”œâ”€â”€ package.json           <span class="comment"># Server dependencies</span>
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€ index.html         <span class="comment"># Web UI (single page)</span>
â”‚   â”‚   â”œâ”€â”€ app.js             <span class="comment"># Client-side application (~1000 lines)</span>
â”‚   â”‚   â””â”€â”€ styles.css         <span class="comment"># Responsive styling</span>
â”‚   â”œâ”€â”€ example_data/
â”‚   â”‚   â”œâ”€â”€ variants.tsv       <span class="comment"># Example variant file (10 variants)</span>
â”‚   â”‚   â””â”€â”€ sample_qc.tsv     <span class="comment"># Example QC file</span>
â”‚   â””â”€â”€ test/
â”‚       â””â”€â”€ server.test.js     <span class="comment"># Integration tests (Mocha/Chai/Supertest)</span>
â”œâ”€â”€ js/                        <span class="comment"># Core igv.js source</span>
â”œâ”€â”€ dist/                      <span class="comment"># Built igv.js library</span>
â”œâ”€â”€ Dockerfile                 <span class="comment"># Multi-stage Docker build</span>
â””â”€â”€ docs/
    â””â”€â”€ index.html             <span class="comment"># This documentation page</span></code></pre>

        <p>The server loads the variant TSV into memory at startup, serves a REST API for filtering, sorting, and curation, and provides a static file server for the web UI. The client-side application fetches data from the API and renders the UI dynamically. Curation state is persisted to a JSON file on disk.</p>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Footer                                                                 -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<footer>
    <p>
        <strong>IGV De Novo Variant Review Server</strong> Â· Built on
        <a href="https://github.com/igvteam/igv.js">igv.js</a> Â·
        <a href="https://github.com/jlanej/igv.js">View on GitHub</a>
    </p>
    <p style="margin-top:8px;font-size:12px;color:#bdc3c7">
        MIT License Â· Forked from <a href="https://github.com/igvteam/igv.js">igvteam/igv.js</a>
    </p>
</footer>

</body>
</html>
